/**
 * @package 	WordPress
 * @subpackage 	Galleria Metropolia
 * @version		1.0.3
 */


/**
 * Smooth Sticky 
 * v1.0.2
**/
!function(u){var c=Object.assign?Object.assign:function(t){for(var o=1;o<arguments.length;o+=1){var s=arguments[o];for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&(t[e]=s[e])}return t},a={add:function(t,o,s,e){s=s||!1;var i=n(o);this[t]||(this[t]={}),this[t][i]||(this[t][i]=!0,u.addEventListener(t,o,s),e&&o())},remove:function(t,o,s){var e=n(o);this[t]&&this[t][e]&&(u.removeEventListener(t,o,!1),delete this[t][e],s&&o())}},p=function(){for(var t="transform webkitTransform MozTransform OTransform msTransform".split(" "),o=document.createElement("div"),s=0;s<t.length;s+=1)if(o&&void 0!==o.style[t[s]])return t[s];return!1}();function d(t,o){var s=t.getBoundingClientRect(),e=u.pageYOffset;return{top:Math.floor(s.top+e),bottom:Math.floor(s.bottom+e),left:Math.floor(s.left),right:Math.floor(s.right),width:Math.floor(s.width),outerWidth:Math.floor(s.width+(parseFloat(o["margin-left"])+parseFloat(o["margin-right"]))),height:Math.floor(s.height+(parseFloat(o["padding-top"])+parseFloat(o["padding-bottom"])))}}function n(t){return t.name||t.constructor.name}function k(){for(var t=0,o=arguments,s=0;s<o.length;s+=1)t+=parseFloat(o[s]);return t}function g(t,o){return Math.max(t,o)-Math.min(t,o)}u.smoothSticky=function(t,o){var s={offsetTop:0,scroll_delay:66,scroll_timeout_fn:null,onScroll:new Function,resize:{min_width:768},method_sticky:"transform",indent_top:0,indent_bottom:0},e={data:{scroll:u.pageYOffset},session:{page_y_offset:u.pageYOffset},sticky_all:function(t){for(var o=(void 0,"string"===typeof t?document.querySelectorAll(t):Array.isArray(t)?t:t.tagName?[t]:!!t.item&&t),s=[],e=0;e<o.length;e+=1){var i=o[e];s.push({element:i,parent:i.parentElement,style:getComputedStyle(i),parent_style:getComputedStyle(i.parentElement)})}return s}(t),options:c(s,o),init:function(){0<this.sticky_all.length&&a.add("resize",this.generalEventResize.bind(this),!1,!0)},generalEventResize:function(){this.options.resize.min_width>=u.innerWidth?(a.remove("scroll",i,!0),a.remove("resize",n,!0)):(a.add("scroll",i,!1,!0),a.add("resize",n,!1,!0))},doScrollEnd:function(){this.scrollEnd(this.stickyRunMove.bind(this))},doMove:function(){for(var t,o,s,e,i,n,r=this.data.scroll,c=r+this.options.offsetTop,a=u.innerHeight,p=r+a,l=this.session.page_y_offset>r,_=0;_<this.sticky_all.length;_+=1){var f=this.sticky_all[_];if(sticky_parent=f.parent,sticky_el=f.element,sticky_post=(t=sticky_el,o=sticky_parent,s=getComputedStyle(t),e=getComputedStyle(o),i=d(t,s),n=d(o,e),{current:i,current_style:s,parent:n,parent_style:e,top_rel:i.top-n.top,last_bottom:n.height-i.height-parseFloat(s["margin-bottom"])}),sticky_diff_height=sticky_post.current.top-sticky_post.parent.top,sticky_diff_scroll_top=g(sticky_post.current.top,c),sticky_from_top=sticky_post.top_rel,sticky_post_outer_width=sticky_post.current.width+k(f.style.marginLeft,f.style.marginRight),sticky_post_parent_outer_width=sticky_post.parent.width+k(f.parent_style.marginLeft,f.parent_style.marginRight),sticky_post_outer_width>=sticky_post_parent_outer_width||sticky_post.current.height>=sticky_post.parent.height)m(sticky_el,0);else{if(l&&sticky_post.current.top>c&&sticky_post.current.top>sticky_post.parent.top){var h=sticky_diff_height-sticky_diff_scroll_top+this.options.indent_top;0<h&&h<sticky_post.last_bottom?sticky_from_top=h:h>sticky_post.last_bottom?sticky_from_top=sticky_post.last_bottom:sticky_from_top=0}else if(!l&&sticky_post.current.bottom<p&&sticky_post.parent.top<c){var y=g(p,sticky_post.current.bottom)+sticky_post.top_rel-this.options.indent_bottom;sticky_post.current.height>a-this.options.offsetTop-this.options.indent_bottom?p<sticky_post.parent.bottom?sticky_from_top=Math.max(y,0):sticky_from_top=sticky_post.last_bottom:document.documentElement.scrollHeight<=p?sticky_from_top=sticky_post.last_bottom:sticky_from_top=Math.min(y-(a-this.options.offsetTop-sticky_post.current.height)+(this.options.indent_top+this.options.indent_bottom),sticky_post.last_bottom)}sticky_from_top!=sticky_post.top_rel?m(sticky_el,sticky_from_top):sticky_post.current.bottom>sticky_post.parent.bottom&&m(sticky_el,sticky_post.last_bottom)}}this.session.page_y_offset=r},stickyRunMove:function(){this.data.scroll=u.pageYOffset,this.options.onScroll.bind(this)(),this.doMove()},scrollEnd:function(t){this.options.scroll_timeout_fn&&clearTimeout(this.options.scroll_timeout_fn),this.options.scroll_timeout_fn=setTimeout(t,this.options.scroll_delay)}},m=function(t){switch(t){case"transform":case"translate":return r;case"margin":case"margin-top":return function(t,o){t.style.marginTop=o+"px"};case"top":return function(t,o){t.style.top=o+"px"};default:return r}}(e.options.method_sticky);function i(){e.doScrollEnd()}function n(){setTimeout(function(){e.session.page_y_offset+=2,e.doScrollEnd(),setTimeout(function(){e.session.page_y_offset-=3,e.doScrollEnd()},200)},200)}function r(t,o){t.style[p]="translate(0px, "+o+"px)"}return e.init(),e},u.jQuery&&(u.jQuery.fn.smoothSticky=function(t){return u.smoothSticky(this.toArray(),t)})}(window);